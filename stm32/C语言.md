# C语言常用知识

## 位操作

| 运算符 |   含义   | 运算符 | 含义  |
| :----: | :------: | :----: | :---: |
|   &    |  按位与  |   ~    | 取反  |
|   \|   |  按位或  |   <<   | 左移  |
|   ^    | 按位异或 |   >>   | 右移  |

1. **按位与**：两个值进行比较都为逻辑1的时候输出1
2. **按位或**：两个值进行比较有一个位逻辑1的时候输出1
3. **按位异或**：两个值进行比较，不一样的输出1，一样输出0
4. **取反**：0与1颠倒取相反的
5. **左移**：向左移动空位补0
6. **右移**：向右边移动空位补0

---

## define 宏定义关键词

#### define是C语言中的预处理命令，用于宏定义，可以提高源代码的可读性，为编程提供方便

    #define 标识符 字符串
*标识符*为所定义的宏名。“字符串”可以是常数、表达式、格式串等

---

## ifdef条件编译

    #ifdef 标识符
    程序段1
    #else
    程序段2
    #endif
**一般用来写头文件防止重复定义**

---

### 头文件模板
    #ifndef __dk_h__
    #define __dk_h__

    struct ks
    {
        u8 KeyNum;
        u8 MatrixKey;
        u8 Num;
        u8 test;
        u8 nums;
    };

    void Nt(unsigned char location, num);
    void Timer0_Init();
    void Delay(unsigned int xms);
    unsigned char Key();
    unsigned char MatrixKey();

    #endif

---

## extern变量声明

**C语言中extern可以置于变量或者函数前，以表示变量或者函数的定义在别的文件中，提示编译器遇到此变量和函数时在其他模块中寻找其他定义。**

**这里面要注意，对于extern申明变量可以多次，但定义只有一次。**

---

## typedef类型别名

定义一种类型的别名，而不只是简单的宏替换。可以用作同时声明指针型的多个对象。

Ps.

    typedef unsigned char u8;

---

## 结构体

在结构体申明的时候可以定义变量，也可以申明之后定义，方法是：***Struct* 结构体名字 结构体变量列表**

    struct 结构体名字{
        成员列表1;
        成员列表2;
        …
    }变量名列表;

---

#### 结构体作用

同一个类型可以用数组，不同类型可以用结构体。

结构体可扩展性强。

---

## static关键字

* **Static 申明的局部变量，存储在静态存储区**
* **它在函数调用结束之后，不会被释放。它的值会一直保留下来**
* **所以可以说static 申明的局部变量，具用记忆功能**

---

## MDK中寄存器地址名称映射分析

* **对MCU**，一切底层配置，最终都是配置寄存器。

* *表 4.6.3 GPIOA 各寄存器实际地址表*

|   寄存器    | 偏移地址 | 实际地址=基地址+偏移地址 |
| :---------: | :------: | :----------------------: |
| GPIOA->CRL  |   0x00   |     0x40010800+0x00      |
| GPIOA->CRH  |   0x04   |     0x40010800+0x04      |
| GPIOA->IDR  |   0x08   |     0x40010800+0x08      |
| GPIOA->ODR  |   0x0c   |     0x40010800+0x0c      |
| GPIOA->BSRR |   0x10   |     0x40010800+0x10      |
| GPIOA->BRR  |   0x14   |     0x40010800+0x14      |
| GPIOA->LCKR |   0x18   |     0x40010800+0x18      |

---
> <STM32F1开发指南-库函数版本>
